<<<<<<< HEAD
<<<<<<< HEAD
(()=>{var e={427:(e,s,t)=>{t(185).connect(process.env.MONGODB_URL)},954:(e,s,t)=>{const o=t(738),r=o.diskStorage({}),a=o({storage:r,allowedFormats:["jpg","png"]});e.exports=a},998:(e,s,t)=>{const o=t(185),r=new o.Schema({imageUrl:String,publicId:String},{timestamps:!0}),a=o.model("Image",r);e.exports={Image:a,imageSchema:r}},3:(e,s,t)=>{const o=t(185),{imageSchema:r}=t(998),a=new o.Schema({title:String,subtitle:String,content:String,images:[r],postTags:[]},{timestamps:!0}),i=o.model("Post",a);e.exports=i},762:(e,s,t)=>{const o=t(860),r=t(954),{Image:a}=t(998),i=t(3),{uploadToCloudinary:n,removeFromCloudinary:c}=t(463),p=new o.Router;p.get("/posts",(async(e,s)=>{try{const e=await i.find();s.render("posts",{posts:e})}catch(e){s.status(400).send(e)}})),p.get("/login",((e,s)=>{s.render("login")})),p.get("/",((e,s)=>{s.render("adminForm")})),p.post("/posts",r.array("postImages",20),(async(e,s)=>{try{const t=new i(e.body),o=await t.save(),r=e.files;await Promise.all(r.map((async e=>{const s=await n(e.path,"emaJons_dev"),t=new a({publicId:s.public_id,imageUrl:s.url});await i.updateOne({_id:o._id},{$addToSet:{images:[t]}})}))),s.redirect("/posts")}catch(e){s.status(400).send(e)}})),e.exports=p},463:(e,s,t)=>{const o=t(518);t(142).config(),o.config({cloud_name:process.env.CLOUDINARY_CLOUD_NAME,api_key:process.env.CLOUDINARY_API_KEY,api_secret:process.env.CLOUDINARY_API_SECRET}),e.exports={uploadToCloudinary:(e,s)=>o.v2.uploader.upload(e,{folder:s}).then((e=>({url:e.url,public_id:e.public_id}))).catch((e=>{console.log(e)})),removeFromCloudinary:async e=>{await o.v2.uploader.destroy(e,((e,s)=>{console.log(e,s)}))}}},518:e=>{"use strict";e.exports=require("cloudinary")},142:e=>{"use strict";e.exports=require("dotenv")},860:e=>{"use strict";e.exports=require("express")},185:e=>{"use strict";e.exports=require("mongoose")},738:e=>{"use strict";e.exports=require("multer")}},s={};function t(o){var r=s[o];if(void 0!==r)return r.exports;var a=s[o]={exports:{}};return e[o](a,a.exports,t),a.exports}(()=>{const e=t(860);t(427);const s=t(762),o=e();o.use(e.json()),o.set("view engine","ejs"),o.set("views","./src/views"),o.use(e.static("public")),o.use(e.urlencoded({extended:!0})),o.use(s),o.listen(3e3)})()})();
=======
(()=>{var e={427:(e,s,t)=>{t(185).connect(process.env.MONGODB_URL)},954:(e,s,t)=>{const o=t(738),r=o.diskStorage({}),a=o({storage:r});e.exports=a},998:(e,s,t)=>{const o=t(185),r=new o.Schema({imageUrl:String,publicId:String},{timestamps:!0}),a=o.model("Image",r);e.exports={Image:a,imageSchema:r}},3:(e,s,t)=>{const o=t(185),{imageSchema:r}=t(998),a=new o.Schema({title:String,subtitle:String,content:String,images:[r],postTags:[]},{timestamps:!0}),n=o.model("Post",a);e.exports=n},264:(e,s,t)=>{const o=t(860),r=t(954),a=t(3),{Image:n}=t(998),{uploadToCloudinary:i,removeFromCloudinary:c}=t(463),u=new o.Router;u.get("/posts",(async(e,s)=>{try{const e=await a.find();s.render("posts",{posts:e})}catch(e){s.status(400).send(e)}})),u.post("/posts",r.array("postImages",5),(async(e,s)=>{try{const t=new a(e.body),o=await t.save(),r=e.files;await Promise.all(r.map((async e=>{const s=await i(e.path,"emaJons_dev"),t=new n({publicId:s.public_id,imageUrl:s.url});await a.updateOne({_id:o._id},{$addToSet:{images:[t]}})}))),s.redirect("/posts")}catch(e){s.status(400).send(e)}})),e.exports=u},463:(e,s,t)=>{const o=t(518);t(142).config(),o.config({cloud_name:process.env.CLOUDINARY_CLOUD_NAME,api_key:process.env.CLOUDINARY_API_KEY,api_secret:process.env.CLOUDINARY_API_SECRET}),e.exports={uploadToCloudinary:(e,s)=>o.v2.uploader.upload(e,{folder:s}).then((e=>({url:e.url,public_id:e.public_id}))).catch((e=>{console.log(e)})),removeFromCloudinary:async e=>{await o.v2.uploader.destroy(e,((e,s)=>{console.log(e,s)}))}}},518:e=>{"use strict";e.exports=require("cloudinary")},142:e=>{"use strict";e.exports=require("dotenv")},860:e=>{"use strict";e.exports=require("express")},185:e=>{"use strict";e.exports=require("mongoose")},738:e=>{"use strict";e.exports=require("multer")}},s={};function t(o){var r=s[o];if(void 0!==r)return r.exports;var a=s[o]={exports:{}};return e[o](a,a.exports,t),a.exports}(()=>{const e=t(860);t(427);const s=t(264),o=e();o.use(e.json()),o.set("view engine","ejs"),o.set("views","./src/views"),o.use(e.static("public")),o.use(e.urlencoded({extended:!0})),o.use(s),o.get("/",((e,s)=>{s.render("home")})),o.get("/about",(async(e,s)=>{s.render("home")})),o.get("/home",(async(e,s)=>{try{s.send("ciao")}catch(e){s.status(400).send(e)}})),o.listen(3e3)})()})();
>>>>>>> 28504d49d675125a88c2f0ebddad54cae8dda5cd
=======
(()=>{var e={427:(e,s,t)=>{t(185).connect(process.env.MONGODB_URL)},954:(e,s,t)=>{const r=t(738),o=r.diskStorage({}),i=r({storage:o,fileFilter:(e,s,t)=>{"image/jpeg"===s.mimetype||"image/png"===s.mimetype?t(null,!0):t({message:"Invalid file type."},!1)}});e.exports=i},998:(e,s,t)=>{const r=t(185),o=new r.Schema({imageUrl:String,publicId:String},{timestamps:!0}),i=r.model("Image",o);e.exports={Image:i,imageSchema:o}},3:(e,s,t)=>{const r=t(185),{imageSchema:o}=t(998),i=new r.Schema({title:{type:String,required:!0},subtitle:String,content:String,images:[o],postTags:[]},{timestamps:!0}),a=r.model("Post",i);e.exports=a},264:(e,s,t)=>{const r=t(860),o=t(3),{Image:i}=t(998),{uploadToCloudinary:a,removeFromCloudinary:n}=t(463),c=new r.Router,p=t(954),u=t(738),d=p.array("postImages",5);c.get("/posts",(async(e,s)=>{try{const e=await o.find();s.render("posts",{posts:e})}catch(e){s.status(400).send(e)}})),c.post("/posts",((e,s)=>{d(e,s,(async t=>{if(t instanceof u.MulterError)s.send(t.message);else if(t)s.status(400).send(t);else{const t=new o(e.body),r=await t.save(),n=e.files;await Promise.all(n.map((async e=>{const s=await a(e.path,"emaJons_dev"),t=new i({publicId:s.public_id,imageUrl:s.url});await o.updateOne({_id:r._id},{$addToSet:{images:[t]}})}))),s.redirect("/posts")}}))})),e.exports=c},463:(e,s,t)=>{const r=t(518);t(142).config(),r.config({cloud_name:process.env.CLOUDINARY_CLOUD_NAME,api_key:process.env.CLOUDINARY_API_KEY,api_secret:process.env.CLOUDINARY_API_SECRET}),e.exports={uploadToCloudinary:(e,s)=>r.v2.uploader.upload(e,{folder:s}).then((e=>({url:e.url,public_id:e.public_id}))).catch((e=>{console.log(e)})),removeFromCloudinary:async e=>{await r.v2.uploader.destroy(e,((e,s)=>{console.log(e,s)}))}}},518:e=>{"use strict";e.exports=require("cloudinary")},142:e=>{"use strict";e.exports=require("dotenv")},860:e=>{"use strict";e.exports=require("express")},185:e=>{"use strict";e.exports=require("mongoose")},738:e=>{"use strict";e.exports=require("multer")}},s={};function t(r){var o=s[r];if(void 0!==o)return o.exports;var i=s[r]={exports:{}};return e[r](i,i.exports,t),i.exports}(()=>{const e=t(860);t(427);const s=t(264),r=e();r.use(e.json()),r.set("view engine","ejs"),r.set("views","./src/views"),r.use(e.static("public")),r.use(e.urlencoded({extended:!0})),r.use(s),r.get("/",((e,s)=>{s.render("home")})),r.get("/about",(async(e,s)=>{s.render("home")})),r.get("/home",(async(e,s)=>{try{s.send("ciao")}catch(e){s.status(400).send(e)}})),r.listen(3e3)})()})();
>>>>>>> a9f088d98a7f926251bacb91cfec1e71cdda5866
